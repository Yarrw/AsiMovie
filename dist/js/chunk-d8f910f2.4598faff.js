(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8f910f2"],{"08f7":function(t,a,s){},"159b":function(t,a,s){var i=s("da84"),e=s("fdbc"),o=s("17c2"),r=s("9112");for(var c in e){var l=i[c],n=l&&l.prototype;if(n&&n.forEach!==o)try{r(n,"forEach",o)}catch(d){n.forEach=o}}},"17c2":function(t,a,s){"use strict";var i=s("b727").forEach,e=s("b301");t.exports=e("forEach")?function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},4160:function(t,a,s){"use strict";var i=s("23e7"),e=s("17c2");i({target:"Array",proto:!0,forced:[].forEach!=e},{forEach:e})},"58d2":function(t,a,s){"use strict";var i=s("08f7"),e=s.n(i);e.a},b0c0:function(t,a,s){var i=s("83ab"),e=s("9bf2").f,o=Function.prototype,r=o.toString,c=/^\s*function ([^ (]*)/,l="name";!i||l in o||e(o,l,{configurable:!0,get:function(){try{return r.call(this).match(c)[1]}catch(t){return""}}})},b301:function(t,a,s){"use strict";var i=s("d039");t.exports=function(t,a){var s=[][t];return!s||!i((function(){s.call(null,a||function(){throw 1},1)}))}},b3e7:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"moviedetails"},[s("div",{staticClass:"box"},[s("div",{staticClass:"bg",style:t.moviedata.bg}),s("div",{staticClass:"content"},[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"back fl",on:{click:t.goback}})]),s("div",{staticClass:"video",on:{click:t.trailervideofn}}),s("div",{staticClass:"content-box"},[s("div",{staticClass:"title"},[t._v(t._s(t.moviedata.title))]),s("div",{staticClass:"message"},[t._v(" "+t._s(t.moviedata.genresData)+" "),s("div",{staticClass:"Collection fr",class:{Collection_act:t.moviedata.iscollection},on:{click:function(a){return t.collection(t.moviedata)}}})]),s("div",{staticClass:"messagebox clearfix"},[s("div",{staticClass:"message-item"},[s("div",{staticClass:"number"},[t._v(t._s(t.moviedata.average))]),s("div",{staticClass:"type"},[t._v("电影评分")])]),s("div",{staticClass:"message-item"},[s("div",{staticClass:"number"},[t._v(t._s(t.moviedata.durationsD))]),s("div",{staticClass:"type"},[t._v("时长")])]),s("div",{staticClass:"message-item"},[s("div",{staticClass:"number"},[t._v(t._s(t.moviedata.collect_count))]),s("div",{staticClass:"type"},[t._v("想看")])])]),s("div",{staticClass:"plot-box"},[s("div",{staticClass:"plot-top clearfix"},[s("div",{staticClass:"plot-title fl"},[t._v("剧情")]),s("div",{staticClass:"plot-more fr",on:{click:t.morefn}},[t._v(t._s(t.more))])]),s("p",{staticClass:"plot",class:{more:t.ismore}},[t._v(" "+t._s(t.moviedata.summary)+" ")])]),s("div",{staticClass:"casts-box clearfix"},[t._m(0),s("div",{staticClass:"casts-middle"},[s("div",{staticClass:"casts-big clearfix",style:{width:(t.moviedata.castscount+1)*t.castswidth+"px"}},[s("div",{staticClass:"casts fl"},[s("div",{staticClass:"img-box"},[s("img",{staticClass:"img-auto",attrs:{src:t.moviedata.avatarsD,alt:""}})]),s("div",{staticClass:"casts-name"},[t._v(" "+t._s(t.moviedata.nameD)+" ")]),s("div",{staticClass:"casts-type"},[t._v(" 导演 ")])]),t._l(t.moviedata.casts,(function(a,i){return s("div",{key:i,staticClass:"casts fl"},[s("div",{staticClass:"img-box"},[s("img",{staticClass:"img-auto",attrs:{src:a.avatars.medium,alt:""}})]),s("div",{staticClass:"casts-name"},[t._v(" "+t._s(a.name)+" ")]),s("div",{staticClass:"casts-type"},[t._v(" "+t._s(a.name_en)+" ")])])}))],2)])]),s("div",{staticClass:"stills-box clearfix"},[s("div",{staticClass:"stills-title"},[t._v("剧照/预告片")]),s("div",{staticClass:"box1"},[s("div",{staticClass:"photos clearfix ",style:{width:(t.moviedata.photoscount+1)*t.photoswidth+"px"}},[s("div",{staticClass:"photos-box ",style:{backgroundImage:"url("+t.moviedata.videoimg+")"},on:{click:t.videofn}},[s("div",{staticClass:"huaxu-box"})]),t._l(t.moviedata.photos,(function(t,a){return s("div",{key:a,staticClass:"photos-box",style:{backgroundImage:"url("+t.icon+")"}})}))],2)])]),s("div",{staticClass:"comment-box"},[s("div",{staticClass:"comment-title"},[t._v("热门评论")]),s("div",{staticClass:"comment"},t._l(t.moviedata.popular_comments,(function(a,i){return s("div",{key:i,staticClass:"comment-item"},[s("div",{staticClass:"comment-top clearfix"},[s("div",{staticClass:"tou fl"},[s("img",{staticClass:"img-auto",attrs:{src:a.author.avatar,alt:""}})]),s("div",{staticClass:"mizi-box fl"},[s("div",{staticClass:"mizi"},[t._v(t._s(a.author.name))]),s("div",{staticClass:"start-bigbox"},[t._m(1,!0),s("div",{staticClass:"act-box",style:{width:a.rating.value*t.starwidth+"px"}},[s("i"),s("i"),s("i"),s("i"),s("i")])])]),s("div",{staticClass:"comment-more fr",on:{click:function(s){return t.readmorefn(a)}}})]),s("div",{staticClass:"comment-content"},[s("p",{staticClass:"tree-text",class:{"all-text":a.isall}},[t._v(" "+t._s(a.content)+" ")]),s("div",{staticClass:"commenttime-box"},[s("div",{staticClass:"time fl"},[t._v(t._s(a.created_at))]),s("div",{staticClass:"xin fr"},[t._v("❤"+t._s(a.useful_count))])])])])})),0)]),s("div",{staticClass:"btn-box"},[s("van-button",{attrs:{type:"primary",size:"large",color:"#4682B4",round:""}},[t._v("购票")])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"video-box"},[s("div",{staticClass:"video-bg",on:{click:t.hiden}}),s("video",{ref:"video",attrs:{src:"",controls:""}})])])])},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"casts-top clearfix"},[s("div",{staticClass:"fl casts-title"},[t._v("演员")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"start-box clearfix"},[s("i"),s("i"),s("i"),s("i"),s("i")])}],o=(s("4160"),s("b0c0"),s("159b"),{name:"moviedetails",data:function(){return{ismore:!1,more:"展开",moviedata:{},castswidth:100,photoswidth:250,starwidth:18,isshow:!1,videourl:null}},computed:{isreturnInit:function(){return this.$store.state.isreturnInit}},methods:{collection:function(t){t.iscollection=!0;var a=localStorage.getItem("Nowuser");if(a){a=JSON.parse(a),a.isloagin||this.$toast("请先登录");var s=localStorage.getItem("likeMovieData");s=s?JSON.parse(s):{},s[a.username]||(s[a.username]=[]);for(var i=0;i<s[a.username].length;i++)if(t.id==s[a.username][i].id)return void this.$toast("收藏过了");s[a.username].unshift(t),localStorage.setItem("likeMovieData",JSON.stringify(s)),this.$toast("收藏成功")}},goback:function(){this.$router.go(-1),this.$store.commit("changIsReturnInit",!1)},morefn:function(){this.ismore=!this.ismore,this.more="展开"==this.more?"收起":"展开"},readmorefn:function(t){t.isall=!t.isall},trailervideofn:function(){var t=this.$refs.video;t.src=this.moviedata.trailervideo,this.isshow=!0},videofn:function(){var t=this.$refs.video;t.src=this.moviedata.video,this.isshow=!0},hiden:function(){var t=this.$refs.video;t.src=null,this.isshow=!1}},created:function(){var t=this,a=this.$route.params.id;this.axios({method:"GET",url:"https://douban.uieee.com/v2/movie/subject/"+a}).then((function(a){a.data.popular_comments.forEach((function(t){t.isall=!1})),a.data.bg="background-image:linear-gradient(to bottom, rgba(238,238,209,0), rgba(238,238,209,.85) 45%, rgba(238,238,209,1) 60%), url("+a.data.images.large+")";var s="";a.data.genres.forEach((function(t){s+=t+"/"})),a.data.genresData=s,a.data.average=a.data.rating.average,a.data.durationsD=a.data.durations[0],a.data.avatarsD=a.data.directors[0].avatars.medium,a.data.nameD=a.data.directors[0].name,a.data.castscount=a.data.casts.length,a.data.photoscount=a.data.photos.length,a.data.iscollection=!1,0==a.data.trailers.length?(a.data.videoimg="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1583320870370&di=6ef61836418a21997d5b4879d6f27bb8&imgtype=0&src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F01%2F50%2F49%2F65574553d1e9212.jpg",a.data.video="",a.data.trailervideo=""):1==a.data.trailers.length?(a.data.videoimg=a.data.trailers[0].medium,a.data.video=a.data.trailers[0].resource_url,a.data.trailervideo=a.data.trailers[0].resource_url):(a.data.videoimg=a.data.trailers[1].medium,a.data.video=a.data.trailers[1].resource_url,a.data.trailervideo=a.data.trailers[2].resource_url);var i=localStorage.getItem("Nowuser");if(i){i=JSON.parse(i);var e=localStorage.getItem("likeMovieData");e=e?JSON.parse(e):{};var o=e[i.username];o=o||[];for(var r=0;r<o.length;r++)a.data.id==o[r].id&&(a.data=o[r])}t.moviedata=a.data}))}}),r=o,c=(s("58d2"),s("2877")),l=Object(c["a"])(r,i,e,!1,null,"45e0eb25",null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-d8f910f2.4598faff.js.map